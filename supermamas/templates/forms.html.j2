{% macro input(name, label="", value="", type="text", errors={}, values={}, flags={}) -%}
    {% set invalid = "invalid" if name in errors else "" %}
    {% set value = values[name] if name in values else value  %}
    {% set required = "required" if "required" in flags else "" %}
    <label for="{{ name }}" class="{{ invalid }}">{{ label }}</label>
    <input name="{{ name }}" id="{{ name }}" type="{{ type }}" value="{{ value }}" class="{{ invalid }}" {{ required }}/>
{%- endmacro %}

{% macro date_selector(name, group="dates", value="", values=None) -%}
    {% set value = values[name] if name in values else value %}
    {% set checked = "checked" if value.selected %}
    <div class="container">
        <input name="{{ group }}" id="{{ name }}" type="checkbox" value="{{ name }}" {{ checked }} />
        <label for="{{ name }}">{{ value.label }}</label>
    </div>
{%- endmacro %}

{%- macro submit(value, name="", class="") -%}
    <input type="submit" class="button success {{ class }}" value="{{ value }}" name="{{ name }}" /> 
{%- endmacro %}

{%- macro checkbox(name, is_checked=False, group="") -%}
    {% set checked = "checked" if is_checked %}
    <div class="custom-checkbox">
        <div class="container">
            <input name="{{ group }}" id="{{ name }}" type="checkbox" value="{{ name }}" {{ checked }} />
            <label class="checkmark" for="{{ name }}"></label>
        </div>
    </div>
{%- endmacro %}

{% macro render_field_errors(errors) %}
    {% if errors %}
        <ul class=errors>
        {% for error in errors %}
            <li>{{ errors[error]|first if errors is mapping else error }}</li>
        {% endfor %}
        </ul>
    {% endif %}
{% endmacro %}

{% macro render_field(field) %}
    <div class="form-field">
    {% if "BooleanField" in field.type %}
        <dt>
        {% if field.heading %}
            <div class="heading">{{ field.heading }}</div>
        {% endif %}
        {% if field.description %}
            <div class="description">{{ field.description }}</div>
        {% endif %}
        </dt>
        <dd>
            {{ field(**kwargs)|safe }} {{ field.label }}
            {{ render_field_errors(field.errors) }}
        </dt>
    {% else %}
        <dt>
            <div class="heading">{{ field.label }}</div>
        {% if field.description %}
            <div class="description">{{ field.description }}</div>
        {% endif %}
        </dt>
        <dd>
            {{ field(**kwargs)|safe }}
            {{ render_field_errors(field.errors) }}
        </dd>
    {% endif %}
    </div>
{% endmacro %}

{% macro recaptcha() %}
    <div class="g-recaptcha" data-sitekey="{{ 'RECAPTCHA_SITE_KEY' | config }}"></div>
{% endmacro %}